<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="1.3 Bean概述 #  Version 5.2.2.RELEASE
 Spring IoC容器管理着一个或多个bean。这些bean是基于您提供给容器的配置元数据创建的（例如，以XML&lt;bean/&gt;定义的形式）。
在容器本身中，这些bean定义表示为BeanDefinition对象，其中包含（除其他信息外）以下元数据：
  包限定的类名：通常是定义的bean的实际实现类。
  bean行为的配置元素，它规定bean在容器中的行为（作用域、生命周期回调等）。
  bean执行其工作时所需引用的其他bean。这些引用也称为协作者或依赖项。
  要在新创建的对象中设置的其他配置环境 — 例如，池的大小限制或管理连接池的bean中要使用的连接数。
  此元数据转换为组成每个bean定义的一组属性。下表介绍了这些属性：
表1. bean定义
   属性 解释&hellip;     类 实例化bean   名称 命名bean   作用域 bean的作用域   构造函数参数 依赖注入   属性 依赖注入   自动装配模式 自动装配协作者   延迟初始化模式 延迟初始化bean   初始化方法 初始化时回调   销毁方法 销毁时回调    除了通过控制bean定义的信息来创建特定的bean之外，ApplicationContext实现还允许注册（由用户）在容器外部创建的现有对象。这是通过getBeanFactory()方法访问ApplicationContext的BeanFactory来完成的，该方法返回BeanFactory DefaultListableBeanFactory实现。DefaultListableBeanFactory支持通过registerSingleton(.">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="1.3 Bean概述" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://hongmao.run/spring-doc/core/beans/beans-definition/" />

<title>1.3 Bean概述 | Spring文档</title>
<link rel="manifest" href="/spring-doc/manifest.json">
<link rel="icon" href="/spring-doc/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/spring-doc/book.min.0abf258f707504285a746a0693d4e04c8ffde5ea7a6381c9e550648b2888a941.css" integrity="sha256-Cr8lj3B1BChadGoGk9TgTI/95ep6Y4HJ5VBkiyiIqUE=" crossorigin="anonymous">
  <script defer src="/spring-doc/flexsearch.min.js"></script>
  <script defer src="/spring-doc/zh-cn.search.min.a7ca59a7a3cd2e3e13ce9cf387452888fc18c9efbd7cbac0d287d0554554322f.js" integrity="sha256-p8pZp6PNLj4Tzpzzh0UoiPwYye&#43;9fLrA0ofQVUVUMi8=" crossorigin="anonymous"></script>
<link rel="alternate" type="application/rss+xml" href="https://hongmao.run/spring-doc/core/beans/beans-definition/index.xml" title="Spring文档" />
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a href="/spring-doc/"><img src="https://spring.io/images/projects/spring-framework-640ad1b04f7efa89e0f0f7353e6b5e02.svg?v=2" alt="Logo" /><span>Spring文档</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="" aria-label="" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>











  

  



  
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://hongmao.run/spring-doc/overview/" class="">Spring框架概述</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-0d1affe253952d37201d1163f8079748" class="toggle" checked />
    <label for="section-0d1affe253952d37201d1163f8079748" class="flex justify-between">
      <a href="https://hongmao.run/spring-doc/core/" class="">核心技术</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-235ed86e667da8fa828dd4f659577027" class="toggle" checked />
    <label for="section-235ed86e667da8fa828dd4f659577027" class="flex justify-between">
      <a href="https://hongmao.run/spring-doc/core/beans/" class="">1. IoC容器</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://hongmao.run/spring-doc/core/beans/beans-introduction/" class="">1.1 Spring IoC容器和Beans简介</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://hongmao.run/spring-doc/core/beans/beans-basics/" class="">1.2 容器概述</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://hongmao.run/spring-doc/core/beans/beans-definition/" class=" active">1.3 Bean概述</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://hongmao.run/spring-doc/core/beans/beans-dependencies/" class="">1.4 依赖</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://hongmao.run/spring-doc/core/beans/beans-factory-scopes/" class="">1.5 bean的作用域</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://hongmao.run/spring-doc/core/beans/beans-factory-nature/" class="">1.6 自定义Bean的性质</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://hongmao.run/spring-doc/core/beans/beans-child-bean-definitions/" class="">1.7 bean定义继承</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://hongmao.run/spring-doc/core/beans/beans-factory-extension/" class="">1.8 容器扩展点</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://hongmao.run/spring-doc/core/beans/beans-annotation-config/" class="">1.9 基于注解的容器配置</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://hongmao.run/spring-doc/testing/" class="">测试</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://hongmao.run/spring-doc/data-access/" class="">数据访问</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://hongmao.run/spring-doc/web-servlet/" class="">Web Servlet</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://hongmao.run/spring-doc/web-reactive/" class="">响应式Web</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-8b9fad4111be4155727ef91074c37605" class="toggle"  />
    <label for="section-8b9fad4111be4155727ef91074c37605" class="flex justify-between">
      <a href="https://hongmao.run/spring-doc/integration/" class="">集成</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://hongmao.run/spring-doc/integration/jmx/" class="">4.JMX</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://hongmao.run/spring-doc/languages/" class="">支持的语言</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>















</nav>




  <script>(function(){var a=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/spring-doc/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>1.3 Bean概述</strong>

  <label for="toc-control">
    
    <img src="/spring-doc/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#131-命名bean">1.3.1 命名bean</a>
      <ul>
        <li><a href="#在bean定义之外给bean添加别名">在bean定义之外给bean添加别名</a></li>
      </ul>
    </li>
    <li><a href="#132-实例化bean">1.3.2 实例化bean</a>
      <ul>
        <li><a href="#使用构造函数进行实例化">使用构造函数进行实例化</a></li>
        <li><a href="#使用静态工厂方法进行实例化">使用静态工厂方法进行实例化</a></li>
        <li><a href="#使用实例工厂方法进行实例化">使用实例工厂方法进行实例化</a></li>
      </ul>
    </li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="13-bean概述">
  1.3 Bean概述
  <a class="anchor" href="#13-bean%e6%a6%82%e8%bf%b0">#</a>
</h1>
<p><a href="https://docs.spring.io/spring-framework/docs/5.2.2.RELEASE/spring-framework-reference/core.html#beans-definition">Version 5.2.2.RELEASE</a></p>
<hr>
<p>Spring IoC容器管理着一个或多个bean。这些bean是基于您提供给容器的配置元数据创建的（例如，以XML<code>&lt;bean/&gt;</code>定义的形式）。</p>
<p>在容器本身中，这些bean定义表示为<code>BeanDefinition</code>对象，其中包含（除其他信息外）以下元数据：</p>
<ul>
<li>
<p>包限定的类名：通常是定义的bean的实际实现类。</p>
</li>
<li>
<p>bean行为的配置元素，它规定bean在容器中的行为（作用域、生命周期回调等）。</p>
</li>
<li>
<p>bean执行其工作时所需引用的其他bean。这些引用也称为协作者或依赖项。</p>
</li>
<li>
<p>要在新创建的对象中设置的其他配置环境 — 例如，池的大小限制或管理连接池的bean中要使用的连接数。</p>
</li>
</ul>
<p>此元数据转换为组成每个bean定义的一组属性。下表介绍了这些属性：</p>
<p><strong>表1. bean定义</strong></p>
<table>
<thead>
<tr>
<th>属性</th>
<th>解释&hellip;</th>
</tr>
</thead>
<tbody>
<tr>
<td>类</td>
<td><a href="./#132-%e5%ae%9e%e4%be%8b%e5%8c%96bean">实例化bean</a></td>
</tr>
<tr>
<td>名称</td>
<td><a href="./#131-%e5%91%bd%e5%90%8dbean">命名bean</a></td>
</tr>
<tr>
<td>作用域</td>
<td><a href="../beans-factory-scopes">bean的作用域</a></td>
</tr>
<tr>
<td>构造函数参数</td>
<td><a href="../beans-dependencies#141-%e4%be%9d%e8%b5%96%e6%b3%a8%e5%85%a5">依赖注入</a></td>
</tr>
<tr>
<td>属性</td>
<td><a href="../beans-dependencies#141-%e4%be%9d%e8%b5%96%e6%b3%a8%e5%85%a5">依赖注入</a></td>
</tr>
<tr>
<td>自动装配模式</td>
<td><a href="../beans-dependencies#145-%e8%87%aa%e5%8a%a8%e8%a3%85%e9%85%8d%e5%8d%8f%e4%bd%9c%e8%80%85">自动装配协作者</a></td>
</tr>
<tr>
<td>延迟初始化模式</td>
<td><a href="../beans-dependencies#144-%e5%bb%b6%e8%bf%9f%e5%88%9d%e5%a7%8b%e5%8c%96bean">延迟初始化bean</a></td>
</tr>
<tr>
<td>初始化方法</td>
<td><a href="../beans-factory-nature/#%e5%88%9d%e5%a7%8b%e5%8c%96%e6%97%b6%e5%9b%9e%e8%b0%83">初始化时回调</a></td>
</tr>
<tr>
<td>销毁方法</td>
<td><a href="../beans-factory-nature/#%e9%94%80%e6%af%81%e6%97%b6%e5%9b%9e%e8%b0%83">销毁时回调</a></td>
</tr>
</tbody>
</table>
<p>除了通过控制bean定义的信息来创建特定的bean之外，<code>ApplicationContext</code>实现还允许注册（由用户）在容器外部创建的现有对象。这是通过<code>getBeanFactory()</code>方法访问ApplicationContext的BeanFactory来完成的，该方法返回BeanFactory <code>DefaultListableBeanFactory</code>实现。<code>DefaultListableBeanFactory</code>支持通过<code>registerSingleton(..)</code>和<code>registerBeanDefinition(..)</code>方法注册。但是，普通的应用程序只使用通过常规bean定义元数据定义的bean。</p>
<blockquote class="book-hint note">
  bean元数据和手动提供的单例实例需要尽早注册，以便容器在自动装配和其他自省步骤中正确地对它们进行推理。虽然在某种程度上支持覆盖现有元数据和现有单例实例，但官方不支持在运行时注册新bean（与对工厂的实时访问同时进行），这可能导致并发访问异常、bean容器中的状态不一致，或两者兼有。
</blockquote>

<h2 id="131-命名bean">
  1.3.1 命名bean
  <a class="anchor" href="#131-%e5%91%bd%e5%90%8dbean">#</a>
</h2>
<p>每个bean都有一个或多个标识符。这些标识符在承载bean的容器中必须是唯一的。bean通常只有一个标识符，但是，如果需要多个，则可以将额外的标识符视为别名。</p>
<p>在基于XML的配置元数据中，可以使用<code>id</code>属性、<code>name</code>属性或两者都使用来指定bean的标识符。<code>id</code>属性只允许您指定一个id。通常，这些名称是字母数字组成的（“myBean”，“someService”等等），但它们也可以包含特殊字符。如果要为bean引入其他别名，还可以在<code>name</code>属性中指定它们，并用逗号（<code>,</code>）或分号（<code>;</code>）或空格来分隔。此处有个历史上的问题需要注意，在Spring 3.1之前的版本中，<code>id</code>属性被定义为<code>xsd:ID</code>类型，它会约束可能的字符。从3.1开始，它被定义为<code>xsd:string</code>类型。注意，bean <code>id</code>唯一性仍然由容器强制执行，尽管不再由XML解析器强制执行了。</p>
<p>您不需要为bean提供<code>name</code>或<code>id</code>。如果不显式提供<code>name</code>或<code>id</code>，容器将为该bean生成唯一的名称。但是，如果希望通过使用<code>ref</code>元素或服务定位器方式按名称引用该bean，则必须提供名称。不提供名称的内在原因与使用<a href="../beans-dependencies#%e5%86%85%e9%83%a8bean">内部bean</a>和<a href="../beans-dependencies#145-%e8%87%aa%e5%8a%a8%e8%a3%85%e9%85%8d%e5%8d%8f%e4%bd%9c%e8%80%85">自动装配协作者</a>有关。</p>
<blockquote class="book-hint grey">
  <div style="text-align: center;"><h3 id="bean命名约定">bean命名约定</h3>
</div>
<p>约定在命名bean时使用标准Java约定作为实例字段名。也就是说，bean名称以小写字母开头，然后用驼峰大小写。此类名称的示例包括<code>accountManager</code>、<code>accountService</code>、<code>userDao</code>、<code>loginController</code>等。</p>
<p>命名bean会使您的配置更易于阅读和理解。此外，如果您使用Spring AOP，那么在将通知应用于一组名称相关的bean时，它会有很大帮助。</p>

</blockquote>

<blockquote class="book-hint note">
  通过类路径中的组件扫描，Spring为未命名的组件生成bean名称，遵循前面描述的规则：本质上，采用简单的类名并将其首个字符转换为小写。但是，在（不常见的）特殊情况下，当有多个字符且第一个和第二个字符都是大写时，原始大小写将被保留。这些规则与<code>java.beans.Introspector.decapitalize</code>（Spring在这里使用）定义的规则相同。
</blockquote>

<h3 id="在bean定义之外给bean添加别名">
  在bean定义之外给bean添加别名
  <a class="anchor" href="#%e5%9c%a8bean%e5%ae%9a%e4%b9%89%e4%b9%8b%e5%a4%96%e7%bb%99bean%e6%b7%bb%e5%8a%a0%e5%88%ab%e5%90%8d">#</a>
</h3>
<p>在bean定义本身中，可以为bean提供多个名称，通过使用<code>id</code>属性指定的最多一个名称和使用<code>name</code>属性指定任意数量的其他名称。这些名称可以是同一bean的等效别名，这在某些情况下非常有用，例如，可以通过使用为组件本身指定bean名称，让应用程序中的每个组件引用公共依赖项。</p>
<p>但是，在实际定义bean的地方指定所有别名并不总是足够的。有时需要为在别处定义的bean引入别名。在大型系统中，配置通常在每个子系统之间分割，每个子系统都有自己的对象定义集。在基于XML的配置元数据中，您可以使用<code>&lt;alias/&gt;</code>元素来实现这一点。以下示例展示了如何执行此操作：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#ff79c6">&lt;alias</span> <span style="color:#50fa7b">name=</span><span style="color:#f1fa8c">&#34;fromName&#34;</span> <span style="color:#50fa7b">alias=</span><span style="color:#f1fa8c">&#34;toName&#34;</span><span style="color:#ff79c6">/&gt;</span>
</code></pre></div><p>在这个例子中，使用此别名定义后，名为<code>fromName</code>的bean（在同一容器中）也可以通过<code>toName</code>引用。</p>
<p>例如，子系统A的配置元数据可能以<code>subsystemA-dataSource</code>的名称引用数据源。子系统B的配置元数据可以通过<code>subsystemB-dataSource</code>的名称引用数据源。在编写使用这两个子系统的主应用程序时，主应用程序以<code>myApp-dataSource</code>的名称引用数据源。要使所有三个名称都引用同一对象，可以将以下别名定义添加到配置元数据中：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#ff79c6">&lt;alias</span> <span style="color:#50fa7b">name=</span><span style="color:#f1fa8c">&#34;myApp-dataSource&#34;</span> <span style="color:#50fa7b">alias=</span><span style="color:#f1fa8c">&#34;subsystemA-dataSource&#34;</span><span style="color:#ff79c6">/&gt;</span>
<span style="color:#ff79c6">&lt;alias</span> <span style="color:#50fa7b">name=</span><span style="color:#f1fa8c">&#34;myApp-dataSource&#34;</span> <span style="color:#50fa7b">alias=</span><span style="color:#f1fa8c">&#34;subsystemB-dataSource&#34;</span><span style="color:#ff79c6">/&gt;</span>
</code></pre></div><p>现在，每个组件和主应用程序都可以通过一个唯一的名称引用数据源，并保证不会与任何其他定义冲突（有效地创建命名空间），但它们引用的是同一个bean。</p>
<blockquote class="book-hint grey">
  <div style="text-align: center;"><h3 id="java-配置">Java 配置</h3>
</div>
<p>如果使用的是Java配置，可以用<code>@Bean</code>注解来设置别名。有关详细信息，请参见<a href="../beans-annotation-config#beans-java-bean-annotation">[<code>@Bean</code>注解使用]</a>。
</blockquote>

<h2 id="132-实例化bean">
  1.3.2 实例化bean
  <a class="anchor" href="#132-%e5%ae%9e%e4%be%8b%e5%8c%96bean">#</a>
</h2>
<p>bean定义本质上是创建一个或多个对象的创建方法。容器在被请求某个名字的bean时查找到该创建方法，并使用该bean定义封装的配置元数据创建（或获取）实际对象。</p>
<p>如果使用基于XML的配置元数据，那么可以在<code>&lt;bean/&gt;</code>元素的<code>class</code>属性中指定要实例化的对象的类型（或类）。该<code>class</code>属性（在内部是<code>BeanDefinition</code>实例上的<code>Class</code>属性）通常是必需的(有关例外情况，请参阅通过<a href="./#%e4%bd%bf%e7%94%a8%e5%ae%9e%e4%be%8b%e5%b7%a5%e5%8e%82%e6%96%b9%e6%b3%95%e8%bf%9b%e8%a1%8c%e5%ae%9e%e4%be%8b%e5%8c%96">使用实例工厂方法实例化</a>和<a href="../beans-child-bean-definitions">Bean定义继承</a>。）您可以通过以下两种方式之一使用<code>Class</code>属性：</p>
<ul>
<li>通常，指定要构造的bean类，然后容器本身通过反射调用其构造函数直接创建bean的场景，这在某种程度上相当于使用<code>new</code>操作符的Java代码。</li>
<li>指定包含静态工厂方法（通过调用该方法以创建对象）的实际类，在不常见的情况下，容器调用类上的静态工厂方法以创建bean。调用静态工厂方法返回的对象类型可以是同一个类，也可以是另一个类。</li>
</ul>
<blockquote class="book-hint grey">
  <p><strong>内部类命名</strong></p>
<p>如果要为静态嵌套类配置bean定义，则必须使用嵌套类的二进制名称。</p>
<p>例如，如果在<code>com.example</code>包中有一个名为<code>SomeThing</code>的类，而这个<code>SomeThing</code>类中有一个名为<code>OtherThing</code>的静态嵌套类，那么bean定义上的<code>class</code>属性的值将是<code>com.example.SomeThing$OtherThing</code>。</p>
<p>请注意，名称中使用<code>$</code>字符将嵌套类名与外部类名分开。</p>

</blockquote>

<h3 id="使用构造函数进行实例化">
  使用构造函数进行实例化
  <a class="anchor" href="#%e4%bd%bf%e7%94%a8%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0%e8%bf%9b%e8%a1%8c%e5%ae%9e%e4%be%8b%e5%8c%96">#</a>
</h3>
<p>当您通过构造函数方法创建bean时，所有普通类都可以由Spring使用，并且与Spring兼容。也就是说，正在开发的类不需要实现任何特定的接口，也不需要以特定的方式进行编码。只需指定bean类就足够了。但是，根据您对特定bean使用的IoC类型，您可能需要一个默认（空）构造函数。</p>
<p>Spring IoC容器实际上可以管理您希望它管理的任何类。它不仅限于管理真正的JavaBean。大多数Spring用户更喜欢真正的JavaBean，它只有一个默认（无参数）构造函数，并根据容器中的属性建模适当的setter和getter。您的容器中还可以有更多异样的非bean样式的类。例如，如果您需要使用一个完全不符合JavaBean规范的老式连接池，Spring也可以管理它。</p>
<p>使用基于XML的配置元数据，您可以按如下方式指定bean类：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#ff79c6">&lt;bean</span> <span style="color:#50fa7b">id=</span><span style="color:#f1fa8c">&#34;exampleBean&#34;</span> <span style="color:#50fa7b">class=</span><span style="color:#f1fa8c">&#34;examples.ExampleBean&#34;</span><span style="color:#ff79c6">/&gt;</span>

<span style="color:#ff79c6">&lt;bean</span> <span style="color:#50fa7b">name=</span><span style="color:#f1fa8c">&#34;anotherExample&#34;</span> <span style="color:#50fa7b">class=</span><span style="color:#f1fa8c">&#34;examples.ExampleBeanTwo&#34;</span><span style="color:#ff79c6">/&gt;</span>
</code></pre></div><p>有关提供有参构造器（如果需要）和设置对象实例属性机制的详细信息，请参阅<a href="../beans-dependencies#141-%e4%be%9d%e8%b5%96%e6%b3%a8%e5%85%a5">依赖注入</a>。</p>
<h3 id="使用静态工厂方法进行实例化">
  使用静态工厂方法进行实例化
  <a class="anchor" href="#%e4%bd%bf%e7%94%a8%e9%9d%99%e6%80%81%e5%b7%a5%e5%8e%82%e6%96%b9%e6%b3%95%e8%bf%9b%e8%a1%8c%e5%ae%9e%e4%be%8b%e5%8c%96">#</a>
</h3>
<p>定义使用静态工厂方法创建的bean时，请使用<code>class</code>属性指定包含静态工厂方法的类，并使用名为<code>factory-method</code>的属性指定工厂方法本身的名称。您应该能够调用此方法（使用可选参数，如下文所述）并返回一个有效对象，该对象随后将被视为是通过构造函数创建的。这种bean定义的一个用途是在老代码中调用静态工厂。</p>
<p>下面的bean定义是通过调用指定工厂方法来创建bean的。该定义不是指定返回对象的类型（类），只是指定包含工厂方法的类。在本例中，<code>createInstance()</code>方法必须是静态方法。以下示例展示了如何指定工厂方法：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#ff79c6">&lt;bean</span> <span style="color:#50fa7b">id=</span><span style="color:#f1fa8c">&#34;clientService&#34;</span>
    <span style="color:#50fa7b">class=</span><span style="color:#f1fa8c">&#34;examples.ClientService&#34;</span>
    <span style="color:#50fa7b">factory-method=</span><span style="color:#f1fa8c">&#34;createInstance&#34;</span><span style="color:#ff79c6">/&gt;</span>
</code></pre></div><p>以下示例展示了一个使用前面的bean定义的类：</p>




<div class="book-tabs"><input type="radio" class="toggle" name="tabs-code" id="tabs-code-0" checked="checked" />
  <label for="tabs-code-0">Java</label>
  <div class="book-tabs-content markdown-inner"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">class</span> <span style="color:#50fa7b">ClientService</span> <span style="color:#ff79c6">{</span>
    <span style="color:#8be9fd;font-style:italic">private</span> <span style="color:#8be9fd;font-style:italic">static</span> ClientService clientService <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> ClientService<span style="color:#ff79c6">();</span>
    <span style="color:#8be9fd;font-style:italic">private</span> <span style="color:#50fa7b">ClientService</span><span style="color:#ff79c6">()</span> <span style="color:#ff79c6">{}</span>

    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">static</span> ClientService <span style="color:#50fa7b">createInstance</span><span style="color:#ff79c6">()</span> <span style="color:#ff79c6">{</span>
        <span style="color:#ff79c6">return</span> clientService<span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">}</span>
<span style="color:#ff79c6">}</span>
</code></pre></div></div><input type="radio" class="toggle" name="tabs-code" id="tabs-code-1"  />
  <label for="tabs-code-1">Kotlin</label>
  <div class="book-tabs-content markdown-inner"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">ClientService</span> <span style="color:#ff79c6">private</span> <span style="color:#ff79c6">constructor</span>() {
    <span style="color:#ff79c6">companion</span> <span style="color:#ff79c6">object</span> {
        <span style="color:#ff79c6">private</span> <span style="color:#ff79c6">val</span> clientService = ClientService()
        <span style="color:#ff79c6">fun</span> <span style="color:#50fa7b">createInstance</span>() = clientService
    }
}
</code></pre></div></div></div>

<p>有关为工厂方法提供（可选）参数和从工厂返回对象后设置对象实例属性机制的详细信息，请参阅<a href="../beans-dependencies#142-%e8%af%a6%e7%bb%86%e7%9a%84%e4%be%9d%e8%b5%96%e9%a1%b9%e5%92%8c%e9%85%8d%e7%bd%ae">依赖项和配置</a>。</p>
<h3 id="使用实例工厂方法进行实例化">
  使用实例工厂方法进行实例化
  <a class="anchor" href="#%e4%bd%bf%e7%94%a8%e5%ae%9e%e4%be%8b%e5%b7%a5%e5%8e%82%e6%96%b9%e6%b3%95%e8%bf%9b%e8%a1%8c%e5%ae%9e%e4%be%8b%e5%8c%96">#</a>
</h3>
<p>与通过静态工厂方法的实例化类似，使用实例工厂方法的实例化是从容器中调用现有bean的非静态方法来创建新bean。要使用此机制，请将<code>class</code>属性设置为空，并在<code>factory-bean</code>属性中指定当前（或父级或祖先级）容器中的bean名称，该容器包含要调用以创建对象的实例方法。使用<code>factory-method</code>属性设置工厂方法本身的名称。下面的示例演示了如何配置这样的bean：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#6272a4">&lt;!-- 工厂bean，包含一个名为createInstance()的方法（注，此处的createInstance()指“创建实例”的方法） --&gt;</span>
<span style="color:#ff79c6">&lt;bean</span> <span style="color:#50fa7b">id=</span><span style="color:#f1fa8c">&#34;serviceLocator&#34;</span> <span style="color:#50fa7b">class=</span><span style="color:#f1fa8c">&#34;examples.DefaultServiceLocator&#34;</span><span style="color:#ff79c6">&gt;</span>
    <span style="color:#6272a4">&lt;!-- 注入此定位器bean所需的任何依赖项 --&gt;</span>
<span style="color:#ff79c6">&lt;/bean&gt;</span>

<span style="color:#6272a4">&lt;!-- 要通过工厂bean创建的bean --&gt;</span>
<span style="color:#ff79c6">&lt;bean</span> <span style="color:#50fa7b">id=</span><span style="color:#f1fa8c">&#34;clientService&#34;</span>
    <span style="color:#50fa7b">factory-bean=</span><span style="color:#f1fa8c">&#34;serviceLocator&#34;</span>
    <span style="color:#50fa7b">factory-method=</span><span style="color:#f1fa8c">&#34;createClientServiceInstance&#34;</span><span style="color:#ff79c6">/&gt;</span>
</code></pre></div><p>以下示例展示了相应的类：</p>




<div class="book-tabs"><input type="radio" class="toggle" name="tabs-code-1" id="tabs-code-1-0" checked="checked" />
  <label for="tabs-code-1-0">Java</label>
  <div class="book-tabs-content markdown-inner"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">class</span> <span style="color:#50fa7b">DefaultServiceLocator</span> <span style="color:#ff79c6">{</span>

    <span style="color:#8be9fd;font-style:italic">private</span> <span style="color:#8be9fd;font-style:italic">static</span> ClientService clientService <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> ClientServiceImpl<span style="color:#ff79c6">();</span>

    <span style="color:#8be9fd;font-style:italic">public</span> ClientService <span style="color:#50fa7b">createClientServiceInstance</span><span style="color:#ff79c6">()</span> <span style="color:#ff79c6">{</span>
        <span style="color:#ff79c6">return</span> clientService<span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">}</span>
<span style="color:#ff79c6">}</span>
</code></pre></div></div><input type="radio" class="toggle" name="tabs-code-1" id="tabs-code-1-1"  />
  <label for="tabs-code-1-1">Kotlin</label>
  <div class="book-tabs-content markdown-inner"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">DefaultServiceLocator</span> {
    <span style="color:#ff79c6">companion</span> <span style="color:#ff79c6">object</span> {
        <span style="color:#ff79c6">private</span> <span style="color:#ff79c6">val</span> clientService = ClientServiceImpl()
    }
    <span style="color:#ff79c6">fun</span> <span style="color:#50fa7b">createClientServiceInstance</span>(): ClientService {
        <span style="color:#ff79c6">return</span> clientService
    }
}
</code></pre></div></div></div>

<p>一个工厂类还可以包含多个工厂方法，如下例所示：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#ff79c6">&lt;bean</span> <span style="color:#50fa7b">id=</span><span style="color:#f1fa8c">&#34;serviceLocator&#34;</span> <span style="color:#50fa7b">class=</span><span style="color:#f1fa8c">&#34;examples.DefaultServiceLocator&#34;</span><span style="color:#ff79c6">&gt;</span>
    <span style="color:#6272a4">&lt;!-- 注入此定位器bean所需的任何依赖项 --&gt;</span>
<span style="color:#ff79c6">&lt;/bean&gt;</span>

<span style="color:#ff79c6">&lt;bean</span> <span style="color:#50fa7b">id=</span><span style="color:#f1fa8c">&#34;clientService&#34;</span>
    <span style="color:#50fa7b">factory-bean=</span><span style="color:#f1fa8c">&#34;serviceLocator&#34;</span>
    <span style="color:#50fa7b">factory-method=</span><span style="color:#f1fa8c">&#34;createClientServiceInstance&#34;</span><span style="color:#ff79c6">/&gt;</span>

<span style="color:#ff79c6">&lt;bean</span> <span style="color:#50fa7b">id=</span><span style="color:#f1fa8c">&#34;accountService&#34;</span>
    <span style="color:#50fa7b">factory-bean=</span><span style="color:#f1fa8c">&#34;serviceLocator&#34;</span>
    <span style="color:#50fa7b">factory-method=</span><span style="color:#f1fa8c">&#34;createAccountServiceInstance&#34;</span><span style="color:#ff79c6">/&gt;</span>
</code></pre></div><p>以下示例展示了相应的类：</p>




<div class="book-tabs"><input type="radio" class="toggle" name="tabs-code-2" id="tabs-code-2-0" checked="checked" />
  <label for="tabs-code-2-0">Java</label>
  <div class="book-tabs-content markdown-inner"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">class</span> <span style="color:#50fa7b">DefaultServiceLocator</span> <span style="color:#ff79c6">{</span>

    <span style="color:#8be9fd;font-style:italic">private</span> <span style="color:#8be9fd;font-style:italic">static</span> ClientService clientService <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> ClientServiceImpl<span style="color:#ff79c6">();</span>

    <span style="color:#8be9fd;font-style:italic">private</span> <span style="color:#8be9fd;font-style:italic">static</span> AccountService accountService <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> AccountServiceImpl<span style="color:#ff79c6">();</span>

    <span style="color:#8be9fd;font-style:italic">public</span> ClientService <span style="color:#50fa7b">createClientServiceInstance</span><span style="color:#ff79c6">()</span> <span style="color:#ff79c6">{</span>
        <span style="color:#ff79c6">return</span> clientService<span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">}</span>

    <span style="color:#8be9fd;font-style:italic">public</span> AccountService <span style="color:#50fa7b">createAccountServiceInstance</span><span style="color:#ff79c6">()</span> <span style="color:#ff79c6">{</span>
        <span style="color:#ff79c6">return</span> accountService<span style="color:#ff79c6">;</span>
    <span style="color:#ff79c6">}</span>
<span style="color:#ff79c6">}</span>
</code></pre></div></div><input type="radio" class="toggle" name="tabs-code-2" id="tabs-code-2-1"  />
  <label for="tabs-code-2-1">Kotlin</label>
  <div class="book-tabs-content markdown-inner"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">DefaultServiceLocator</span> {
    <span style="color:#ff79c6">companion</span> <span style="color:#ff79c6">object</span> {
        <span style="color:#ff79c6">private</span> <span style="color:#ff79c6">val</span> clientService = ClientServiceImpl()
        <span style="color:#ff79c6">private</span> <span style="color:#ff79c6">val</span> accountService = AccountServiceImpl()
    }

    <span style="color:#ff79c6">fun</span> <span style="color:#50fa7b">createClientServiceInstance</span>(): ClientService {
        <span style="color:#ff79c6">return</span> clientService
    }

    <span style="color:#ff79c6">fun</span> <span style="color:#50fa7b">createAccountServiceInstance</span>(): AccountService {
        <span style="color:#ff79c6">return</span> accountService
    }
}
</code></pre></div></div></div>

<p>这种方法表明，工厂bean本身可以通过依赖注入（DI）进行管理和配置。详情请查看<a href="../beans-dependencies#142-%e8%af%a6%e7%bb%86%e7%9a%84%e4%be%9d%e8%b5%96%e9%a1%b9%e5%92%8c%e9%85%8d%e7%bd%ae">依赖项和配置</a>。</p>
<blockquote class="book-hint note">
  在Spring文档中，“工厂bean”（“factory bean”）是指在Spring容器中配置的bean，它通过<a href="./#%E4%BD%BF%E7%94%A8%E5%AE%9E%E4%BE%8B%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E8%BF%9B%E8%A1%8C%E5%AE%9E%E4%BE%8B%E5%8C%96">实例</a>或<a href="./#%E4%BD%BF%E7%94%A8%E9%9D%99%E6%80%81%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E8%BF%9B%E8%A1%8C%E5%AE%9E%E4%BE%8B%E5%8C%96">静态</a>工厂方法创建对象。相比之下，<code>FactoryBean</code>（注意大写）指的是Spring特定的<a href="../beans-factory-extension#183-%E4%BD%BF%E7%94%A8FactoryBean%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AE%9E%E4%BE%8B%E5%8C%96%E9%80%BB%E8%BE%91"><code>FactoryBean</code></a>。
</blockquote>

</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>



  <script>(function(){function a(c){const a=window.getSelection(),b=document.createRange();b.selectNodeContents(c),a.removeAllRanges(),a.addRange(b)}document.querySelectorAll("pre code").forEach(b=>{b.addEventListener("click",function(c){a(b.parentElement),navigator.clipboard&&navigator.clipboard.writeText(b.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#131-命名bean">1.3.1 命名bean</a>
      <ul>
        <li><a href="#在bean定义之外给bean添加别名">在bean定义之外给bean添加别名</a></li>
      </ul>
    </li>
    <li><a href="#132-实例化bean">1.3.2 实例化bean</a>
      <ul>
        <li><a href="#使用构造函数进行实例化">使用构造函数进行实例化</a></li>
        <li><a href="#使用静态工厂方法进行实例化">使用静态工厂方法进行实例化</a></li>
        <li><a href="#使用实例工厂方法进行实例化">使用实例工厂方法进行实例化</a></li>
      </ul>
    </li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












